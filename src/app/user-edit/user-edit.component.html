<div class="main-content" *ngIf="showTableEdit" >
    <div class="container-fluid">
        <div class="row">
           <div class="col-md-12">
                <div class="card">
                    <div class="header">
                        <h4 class="title">Editar usuario</h4>
                        <p class="category">{{fecha}}</p>
                    </div>
                    <div class="content table-responsive table-full-width">
                        <table class="table table-hover table-striped">
                            <thead>
                                <tr>
            
                                    <th>Nombre</th>
                                    <th>Apellido</th>
                                    <th>Email</th>
                                    <th>Área</th>
                                    <th>Rol</th>
                                    <th>Actividad</th>
                                    <th>Estado</th>
                                    <th>Nombre de Usuario</th>
                                    <th>Acciones</th> 
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let user of users">
                                    <td>{{ user.Nombre }}</td>
                                    <td>{{ user.Apellido }}</td>
                                    <td>{{ user.Email }}</td>
                                    <td>{{ user.Area }}</td>
                                    <td>{{ user.Rol }}</td>
                                    <td>{{ user.Actividad }}</td>
                                    <td>{{ user.Estado }}</td>
                                    <td>{{ user.NombreUsuario }}</td>
                                    <td>
                                        <a (click)="editUser(user)" title="Editar Usuario">
                                            <i class="fa-solid fa-user-pen"></i>
                                        </a>
                        
                                        <!-- Botón de Eliminar -->
                                        <a (click)="deleteUser(user)" title="Eliminar Usuario" style="
                                        margin-left: 30%;">
                                            <i class="fa-regular fa-trash-can"></i>
                                        </a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div *ngIf="isLoading" id="loader">
                            <img src="../../assets/img/loader-preview.svg" alt="loading">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div *ngIf="successMessage" class="alert alert-success mt-3" role="alert">
            ¡Usuario Eliminado con éxito!
          </div>

          
          <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
            ¡Error, Usuario no Eliminado!
          </div>
    </div>
   
</div>
<div class="main-content" *ngIf="showFormUpdate"> 
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="header">
                        <h4 class="title"><strong>Editar Usuario</strong></h4>
                    </div>
                    <div class="content">
                        <form [formGroup]="userFormEdit" (ngSubmit)="onEditSubmit()">
                            <div class="row">
                                <div class="col-md-5">
                                    <div class="form-group">
                                        <label for="empresa">Empresa</label>
                                        <input id="empresa" type="text" class="form-control" disabled placeholder="Makita" value="Makita">
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label for="usuario">Usuario</label>
                                        <input type="text" id="usuario" class="form-control" placeholder="Usuario" formControlName="usuario">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label for="email">Email</label>
                                        <input type="email" id="email" class="form-control" placeholder="ejemplo@makita.cl" formControlName="email" autocomplete="email">
                                        <div *ngIf="userFormEdit.get('email').invalid && userFormEdit.get('email').touched" class="text-danger">
                                            Ingrese Email valido.
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="nombre">Nombre</label>
                                        <input id="nombre"type="text" class="form-control" placeholder="Nombre" value="" formControlName="nombre">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="apellido">Apellido</label>
                                        <input id="apellido" type="text" class="form-control" placeholder="Apellido" value="" formControlName="apellido">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label for="fechaInicio">Fecha de Inicio</label>
                                        <input type="date" id="fechaInicio" class="form-control" placeholder="Fecha de Inicio" formControlName="fechaInicio">
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label for="fechaFin">Fecha Final</label>
                                        <input type="date" id="fechaFin" class="form-control" placeholder="Fecha Final" formControlName="fechaFin">
                                    </div>
                                </div>
                            </div>
                            <div class="header">
                                <div class="row">
                                    <h4 class="title"><strong>Permisos</strong></h4>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label for="role">Rol</label>
                                        <select id="role" class="form-control" formControlName="role">
                                            <option value="Administrador">Administrador</option>
                                            <option value="Consulta">Consulta</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label for="area">Area</label>
                                        <select id="area" class="form-control" formControlName="area" >
                                            <option value="herramientas">Herramientas</option>
                                            <option value="accesorios">Accesorios</option>
                                            <option value="inventario">Almacenamiento</option>
                                            <option value="ubicacion">Repuestos</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group" >
                                        <label for="actividad">Actividad</label>
                                        <select id="actividad" class="form-control" formControlName="actividad">
                                            <option value="inventario">Inventario</option>
                                            <option value="picking">Picking</option>
                                            <option value="paking">Packing</option>
                                            <option value="ubicacion">ubicacion</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="checkbox col-md-3">
                                    <div class="form-group">
                                        <input id="usuarioActivo" type="checkbox" formControlName="usuarioActivo">
                                        <label for="usuarioActivo">
                                          Activo
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn btn-info btn-fill pull-right" [disabled]="userFormEdit.invalid">Editar</button>
                            <br>
                            <br>
                            
                            <hr>
                            <div *ngIf="successMessage" class="alert alert-success mt-3" role="alert">
                                ¡Usuario editado con éxito!
                              </div>

                              
                              <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
                                ¡Error, Usuario no editado!
                              </div>
                            
                            <hr>
                            <div class="clearfix"></div>
                        </form>
                    </div>
                </div>
            </div>
            
        </div>
    </div>
</div>